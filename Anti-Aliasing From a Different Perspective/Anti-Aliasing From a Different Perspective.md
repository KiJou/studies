---
title: Anti-Aliasing From a Different Perspective [@Andreev2011]
numberSections: false
---
# Directionally Localized Anti-Aliasing

# そのアイデアとは…[The Idea is...]

それらの方向に沿ってエッジをブラーすることである

# エイリアシング[Aliasing]

- 信号処理
    - サンプル時の区別できない信号
    - 再構築のアーティファクト
- グラフィクス
    - ピクセル"ノイズ"
    - エッジのジャギー

# アンチエイリアシング その１[Anti-Aliasing I]

- 高周波を減らす
- 過剰サンプル、および、"ブラー"
    - 音響では時間的
    - 光学では空間的
- 完璧なフィルタは存在しない
    - サンプリング理論
    - シャープ(エイリアス)対ソフト(アンチエイリアス)

# アンチエイリアシング その2[Anti-Aliasing II]

- テクスチャ
    - MIPマッピング
- シェーディング
    - スペキュラ、リムライティング
    - 手動で回避する
- ジオメトリのエッジ
    - マルチサンプリング(MSAA)
    - カスタムソリューション

# MSAA

- 良好な品質
- 部分的なスーパーサンプリング
    - 少なくとも深度
- ディファードレンダリングとフレンドリーでない
- コンソールではコストが高い
    - 直接的にも間接的にも

# 代替品[Alternatives]

- スクリーン空間フィルタリング
    - 知覚ベース
    - ジャギーを隠す
    - モーフォロジカルAA(MLAA)
- テンポラル(Crysis2、Halo)
- エッジベースAA

# MLAA

- モーフォロジカルアンチエイリアシング
    - 元のジオメトリを再構築する
    - 近傍を再ブレンドする
- CPUフレンドリー
    - The Saboteur
    - GoW3 (4 ms / 5 SPUs)
- XBox360 GPU (-> 3.7 ms)

静的な画像では良好な結果を得るが、二値の特徴に基づくパターン認識のため、動作中にかなり目立つテンポラルアーティファクトに悩まされる。画像中のフリッカリングはノイジーな背景を通る長いエッジで最も多く見られる。

# エッジベース[Edge-Based]

- XBox360 SDKのサンプル
    - 1ピクセル幅ポリゴンをレンダリングする
    - ピクセルカバレッジとしてテクスチャ座標
    - 近傍を再ブレンドする

# 使用できなかったモノ[Could Not Use]

- MLAA
    - 不安定
    - X360では厳しい
- エッジベース
    - PS3では追加のGPUコストがかかる
- テンポラル
    - TFU2での動的解像度調節
    - モーションVS解像度

# "理想的"なAAフィルタ["Ideal" AA Filter]

- マルチプラットフォーム
    - GPU、SPU
    - プロダクションで信頼できる
- 時間的に安定
- 知覚ベース
    - ジャギーを隠す
    - ローコストで良好な品質

# もしも…[What If ...]

ピクセルカバレッジのようなルックを作る

# Fresnel項ベース[Fresnel Term Based]

- $(N \cdot V)^n$
- 再ブレンドする
- 曲面のみ
- 制御しづらい

# 深度ベース勾配[Depth Based Gradients]

- エッジの勾配を見つける
    - 深度のボックスブラー
    - レベルを局所的に調整する
- 再ブレンドする
- 平坦な表面

# 深度の再サンプリング[Depth Re-Sampling]

- 代替深度をレンダリングする
    - 回転した第二Zプリパス
    - または、深度に対する4xMSAA
- ピクセルカバレッジを計算する
    - 深度値をリマップする
- 再ブレンドする

# 観察[Observation]

# DLAAプロトタイピングその1[DLAA Prototyping I]

- Photoshop
    - レイヤVSピクセル
    - 複合的なコトを行うのが難しい
    - うまく動作するなら実装しやすい:)
- フィルタ/その他/カスタム
    - 基本的な5x5畳み込み
    - ブラー、エッジ、など…

# DLAAプロトタイピングその5[DLAA Prototyping V]

- 垂直にブラーする
- 垂直のエッジを見つける
- エッジマスクを構築する
    - `saturate(abs(x) * a - b)`
- 元のレイヤーとブレンドする
- 水平も同様に

# 短いエッジのみ[Short Edges Only]

# 2つのケース[Two Cases]

# 長いエッジの検出[Long Edge Detection]

- ハイパスマスクを取る
- ブラーする
- コントラストを調整する
- 長エッジフィルタを適用する
    - 必要なところに

# 長いエッジのフィルタリング[Long Edge Detection]

- カラーブリーディング
- 光度ブレンディングモード
- 対象としてのぶらーされた輝度
    - 合致するローカルピクセルを探す

# ノイズレベル推定[Noise Level Estimation]

- ノイズ領域を除外する
    - 長い垂直および水平エッジを持つ
    - $\|H_{hF} - V_{hF}\| > \lambda$

# 勾配レベル比較[Gradient Levels Comparison]

TODO

---
title: MLAA from 2009 to 2017 Research Impact Retrospective [Jimenez2017]
bibliography: bibliography.bib
numberSections: false
---
# 金字塔: MSAA --- CSAA --- EQAA[Gold Standards: MSAA - CSAA - EQAA]

10年前、金字塔的存在はMSAAだった。

このテクニックは各ピクセルに一度だけのシェーディングに基づくが、個別に各サブピクセルをシェードする真のSSAAとは対称的に、複数の深度テストの結果を格納している。

これは時折高価なソリューションであったが、大方、代替案を探す研究はほとんど行われていなかった。

# エッジ検出とブラー[Edge Detection and Blur]

[@Leadbetter2009a]からの情報
[@Sousa2007]
[@Shishkovtsov2004]

最も使われるMSAAへの代替案は、S.T.A.L.K.E.R、Crysis1、Brutal Legendで使われるモノのような、エッジ検出とブラーである。

これは単純で安価であり、この時点においてディファードエンジンで利用できる最良の選択肢であった。

しかし、その出来[the results]はMSAAと比べてはるかに[significantly]低品質であった。

# モーフォロジカルアンチエイリアシング[Morphological Antialiasing]

[@Reshetov2009]

その後、2009年には、モーフォロジカルアンチエイリアシングが登場[come into play]し、常識が一変[changed the rules]した。

私の意見では、MLAAの最大の功績はコミュニティの考え方[mindset]を一変させたことである。

それはMSAAを用いるより高品質なこの問題に対する様々なアプローチがあるかもしれないことを証明した。

それはこの問題に対する標準的で一般に認められているソリューションに疑問を投げかけた。

# ポストAAテクニックの爆発[Explosion of Post-AA Techniques]

[@Jimenez2011a]

そして、これは同様に他の多くの人々にそれについて考えさせた。

2011年には、とてもたくさんのポストプロセッシングAAテクニックが存在した。それらはひとつのコースに一斉に実際に集合している。

次のいくつかのスライドではこれらのいくつかをカバーしたいと思う。

# モーフォロジカル対エッジ検出とブラー[Morphological versus Edge Detect and Blur]

- モーフォロジカル
    - エッジ検出＋**サーチ**＋ブラー
    - 非局所的情報が利用可能(パターン)
- エッジ検出とブラー
    - エッジ検出＋ブラー
    - 局所的情報のみ利用可能(近傍)

でも、続ける前に、モーフォロジカルとエッジ検出とブラーの区別を付け[make the distinction]よう。

私の見解では[from my point of view]、モーフォロジカルを区別するモノは、より正確なピクセルのブレンドを行う機会を与えるサーチ処理である。

# Saboteur (2009)

[@Leadbetter2009b]からの情報

SaboteurはPS3においてコンソールで今まで見たことのないアンチエイリアシング品質を伴って出荷され、高品質なポストプロセッシングアンチエイリアシングを伴って出荷した恐らく初めてのゲームである。

Digital Foundryはこれを詳細にカバーし、このテクニックがMLAAかそれと同種のものであると結論づけた。

しかし、残念ながら、実際の詳細は、そのプレゼンテーションが取りやめになってしまったので、公に知られることはなかあった。

# SonyのエッジMLAA(2009)[Sony's Edge MLAA (2009)]

[@Perthuis2011]

Sonyもまた、高速なPS3 SPU実装に焦点を当てた彼ら自身のMLAA実装を作成した。

<!-- p.9 -->

[@Perthuis2011]

それは品質、特に、ディテールの保存に多大な注意を払っている。

とりわけGod of War3、Killzone 3、Little Big Planet 2がSonyのMLAAで出荷した。

それはPS3で開発しているサードパーティにさえも提供された。

# Double Fine's Costume Quest (2010)

[@Demoreuille2011]

Double Fine's Costume QuestはXbox360でMLAAを伴って出荷され、恐らくこのコンソールでは初めてのことであった。

<!-- p.11 -->

[@Demoreuille2011]

最も興味深い機能のひとつはCPU/GPUのハイブリッドなソリューションであることだった。

# Star Wars: The Force Unleashed II - DLAA (2010)

[@Andreev2011]

Star Wars: The Force Unleashed IIはDLAAを伴って出荷した。これはMLAAの精神に似ているが単純化したパターン認識を持っている。

<!-- p.13 -->

[@Andreev2011]

このテクニックで作られる重要な観察結果は、正しいブラー半径を用いる場合にAAが垂直ブラーでも水平ブラーでも同じように見えることであった。これは計算を単純化する。

# FXAA Console (2010)

[@Lottes2011]

そして、FXAAという、良好なクオリティとパフォーマンスのトレードオフと統合の単純さのため、恐らく最も広く使われるポストAAテクニックがある。

このテクニックは前の世代で出荷されている多くのゲームで用いられた。

それには2つのフレーバーがある。

高品質なエッジ検出とブラーフィルタであるコンソールのもの、と…

# FXAA Quality (2010)

[@Lottes2011]

モーフォロジカルアンチエイリアシングの最適化バージョンとして分類[catalog]できるかもしれないFXAA Qualityがある。

より高速なランタイムのためにエッジ検出処理を回避する。

このテクニックはパフォーマンスに焦点を当たっていた。

# Jimenez's MLAA (2010)

[@Jimenez2011b]

その対極には[on the other end of the spectrum]、MLAAの初めてのGPU実装のひとつであるJimnezのMLAAがあった。

従来型ではないバイリニアフィルタリングの使い方を加えて、2パスではなく3パスでアルゴリズムを分割することで、MLAAの計算を大幅に減らすことができた。

<!-- p.17 -->

[@Jimenez2011b]

このテクニックの焦点は、パターン認識と鮮鋭さの保存を改善することで、できるだけ最高品質を達成することにあった。

# SMAA (2011)

[@Jimenez2011b]

それは2011年にSMAAへと進化し、単一のテクニックにAAを行う複数のアプローチを組み合わせた。

テンポラルAA
モーフォロジカルAA
マルチサンプリングAA

それぞれの強みを補い合うために。

<!-- p.19 -->

[@Jimenez2011b]

ピクセルパターンの拡張セットを識別する、より高度なモーフォロジカル要素を含んでもいた。

# FXAA/SMAAの特徴[FXAA / SMAA Features]

- FXAA Console
    - ✅ 究極的なパフォーマンスに焦点を合わせる
    - ✅ 統合が非常に容易
    - ❌ よりボケたテクスチャディテール
    - ❌ 時間的な安定性の低下
    - ❌ より悪いサブピクセル特徴
- FXAA Quality
    - ✅ 中程度のクオリティ/パフォーマンスのトレードオフを対象とする
    - ✅ MSAAより良好なグラデーション
    - ✅ 統合が非常に容易
    - ❌ よりボケたテクスチャディテール
    - ❌ 時間的な安定性の低下
    - ❌ より悪いサブピクセル特徴
- SMAA T2x
    - ✅ 究極的なクオリティに焦点を合わせる
        - 鮮鋭さ
        - 拡張パターン認識
        - サブピクセル特徴のための任意のTAA/MSAAコンボ
    - ✅ MSAAより良好なグラデーション
    - ❌ より複合的なインテグレーション
- FXAA/SMAAの両方
    - ✅ MSAAを扱わない
    - ✅ ディファードを互換性がある

すべての論じたテクニックの内、恐らくより人気なのはFXAAとSMAAの2つである。

では、これらはMSAA以上の何を提供するのだろうか？

まず第一に、これらは開発者がコードベースでMSAAパスを扱わなくても良いようにする。これはかなり便利であった。

第二に、これらはしばしばより高速であった。

第三に、これらはディファードエンジンが適切なアンチエイリアシングを持つことを可能にした。

そして最後に、クオリティの観点で、これらは、FXAAやSMAA1xの場合に対する減少したサブピクセルレンダリングサポートのコストで、オブジェクトのエッジに素晴らしいアンチエイリアシングを提供した。後に見るだろうが、SMAA T2xは時間的な要素を加えることでこの問題を軽減した。

# DEAA & GBAA (2011)

[@Malan2011; @Persson2011]

モーフォロジカルアンチエイリアシングは、似たようなポストプロセッシングカラーブレンディング処理を維持しつつも、エッジへの距離を用いるピクセルエリアを解析的に計算することを探るテクニックを結果としてもたらした。

# GCNに対する低レベルな最適化[@Drobot2014a][Low Level Optimizations for GCN [Drobot2014]]

[@Drobot2014a]

Drobotは2014年にエッジへの距離がGCNプラットフォームで効率的に計算される方法を示した。このテクノロジーは2016年にThe Tomorrow Childrenにて最終的に出荷された。

# KillzoneのAAの移り変わり[Killzone AA Transition]

[@Valient2007]

旧世代ビジュアルでのMLAAの影響[implication]を[put]するため、Killzoneについて簡単に話したいと思う。

Killzoneの2作目[installment]は部分的なSSAAを用いた。

フランチャイズの3作目でのMLAAの採用はリソースをAAから他のレンダリング機能へ動かすことができた。

多くのゲームはより良いライティングを持つ、または、MSAAコストを払っていてはできなかった様々な機能を持つように選んだ。

# Uncharted 4 (2016)

MLAAベースのテクニックは、より単純なジオメトリやより短い描画距離のため、多くの旧世代のタイトルで優れていた。


サブピクセル特徴を失うことはそれほど大きな問題にならなかった。

しかし、コンソールの今世代のゲームの多くはより複合的な特徴を持ち、サブピクセル特徴の喪失がより大きな問題になる。

これは異なる、又は、無料のソリューションが欲しくなる。

想像の通り、何のことについて話しているかというと…

# テンポラルAA[Temporal AA]

…テンポラルAAである。

私の意見では、MLAAの発明は我々がこんにち観察されるテンポラルAAの幅広い採用に対して重要であった。

テンポラルAAが存在する理由のひとつは、おそらくディファードレンダリングがMSAAと互換性を持たないという事実である。

しかし、私の視点からは、他の重大な理由は、MLAAが現時点で使われるテクニックに疑問を投げかけ、ポストプロセッシングアンチエイリアシングを世にもたらした[put ... into the spotlight]ことであった。

# 逆再投影キャッシングを伴うリアルタイムシェーディングの高速化[@Nehab2007][Accelerating Real-Time Shading with Reverse Reprojection Caching [Nehab2007]]

最初のリアルタイムの努力[effort]はトライアングルの内側のシェーティングのテンポラルスーパーサンプリングに焦点を当てられた。

Nehabらは2007年に、2Dフレームバッファの再投影と指数関数的な累積バッファを含む、モダンなテンポラルアンチエイリアシングの重要なコンセプトのいくつかを広めた。

# Gran Turismo PSP (2009)

[@Greer2009]からの情報


それほど時間を置かずに、Gran TurismoがPSPでフレームブレンディングを持たないテンポラルAAを伴って出荷された。

これは、左に見られるように、単にサブピクセル位置をフリッカーすることを意味する。

しかし、PSPでこれを観察しようとすると、そのスクリーンの低い応答速度のため、フリッカリングを見ることはもはやできない。

スクリーンは事実上フレームをブレンドしている。

これは、60fpsで、この特定のハードウェアでのみ行うことができ、また、多分速いペースのゲームでのみ行うことができる。

しかし、このゲームではとてもうまく動作したように思う。

# Halo Reach (2010)

[@Leadbetter2010]からの情報

ブレンドされたテンポラルアンチエイリアシングを伴って出荷された私の知る中で初めてのゲームはHalo Reachである。

AAでは[@Nehab2007]にあるような深度リジェクションを使えない。ここでは、前フレームの深度は非遮蔽[disocclusion]をチェックするために現フレームのものと比較される。

フレームごとにサブピクセル位置をジッタリングするケースでは、各サブサンプルは異なる深度を持つだろう。これは前フレーム情報を常にリジェクトするだろうことを意味する。

これを解決するために、Halo Reachでは単純なアプローチが用いられた。ピクセルが静止していればブレンドし、移動中であれば、フレームブレンディングはオフにされるだろう。

# Crysis 2 (2011)

Crysis 2は、自身のピクセルの速度と投影されたものとの比較で構成する、速度の重み付けを導入することで[@Nehab2007]を拡張した。これははじめてゴーストフリーな画像を保存しつつ移動中のエッジをアンチエイリアスすることが可能になる。

# SMAA (2011)

[@Jimenez2012]

Crysis 2のテンポラルAAがJimenezのMLAAとひとつのハイブリッドテクニックに合わさったものはSMAAと呼ばれる。これは先に述べられ…

# Crysis 3 - SMAA (2013)

…そして、PCのCrysis 3で出荷された。

# Assassins Creed 4 and Ryse - SMAA (2013)

…そして、コンソール初では、Assassins Creed 4とRyseでも。

# 人喰いの大鷲トリコ (2016)[The Last Guardian (2016)]

現在では、最近出荷された人喰いの大鷲トリコを含めて、このテクニックを伴って出荷したタイトルが複数ある。

(ゲームのクレジットに現れる情報に基づく)

# Lottes' TSSAA & TXAA (2011)

[@Lottes2011; @Cao2016]

並行して、Timothy Lottesは、前フレームを用いるだけに頼らず、[@Nehab2007]にあるような累積バッファを使った、テンポラルAAテクニックを設計した。

これを可能にするために、彼は近傍のクランプを導入した。アンチエイリアシングに対して確実に動作するために累積バッファのスーパーサンプリングを作る重要な貢献であった。

このテクニックは最終的にNVIDIAのTXAAに発展した。

# 進化[Evolution]

[@Sousa2013; @Karis2014; @Drobot2014b; @Salvi2016; @Jimenez2016]

後続の[follow up]テクニックのいくつかはこれらの早期のテンポラルアンチエイリアシングの力作[effort]を拡張したものがある。それらはより高品質で、高速で、ロバストになっている。

そこにはSMAA 1TX、Unreal 4のテンポラルスーパーサンプリング、HRAA、Salviの分散クリッピング、フィルミックAAを含む。

今日の時点で、多くのゲームがテンポラルAA技術を伴って出荷されている。これは新しい標準となっている。

Call of Dutyの場合、ハイブリッドなソリューションで増加したエッジクオリティのためにモーフォロジカルアンチエイリアシングを依然として利用している。

# テンポラルアップサンプリングと4K再構築[Temporal Upsampling and 4k Reconstruction]

テンポラルAAから、新しい研究の方向が最近生まれてきている。

テンポラルアップサンプリングでは、前フレーム情報をアンチエイリアシングではなくより大きな画像を作るのに使われる。

そして、4K再構築では、スクリーンの一部のみがレンダリングされ、残りはヒューリスティクスを用いて推測される。

# SRAA (2011)

[@McGuire2011]

SRAAと呼ばれる、MLAAに恐らく影響[influenced]されたテクニックはサブピクセル特徴を再構築する能力を持ったサーチフリーなアプローチを示した。

# Infamous Second Son (2014, patched for 4k)

差分ブレンドとオブジェクトやプリミティブIDバッファの再構築のような似たようなアイデアは、PS4 Proで出荷しているいくつかのゲームの4Kテンポラルアップサンプラに配備された。これは、私の意見では、業界[industry]でのMLAAの影響の広がりを示している。

# Dust Experimental Temporal Upsampling (2012)

[@Malan2012]

Hugh Malanは、恐らく初めて、テンポラルアップサンプリングを紹介した。

最終ビルドに搭載[ship]しているかはわからないが、示されたビジュアルクオリティはかなり印象的だった。

# Killzone Shadow Fall (2014)

[@Valient2014]

テンポラルアップサンプリングを伴って実際に出荷したのが知られている最初のゲームはKillzone Shadow Fallである。

マルチプレイヤーでは、960x1080で動作し、テンポラル水平アップサンプルを処理した。

# Battlefield 1 (2016) and Mass Effect Andromeda (2017)

[@Wihlidal2017]

4Kコンソールイメージングの最近の導入はテンポラルアップサンプリングをさらに望ましい機能にした。

Battlefield 1やMass Effect Andromedaを含む、PS4 Proでの幾つかのゲームはより高解像度の画像を出力するためにテンポラル情報を活用する。このケースでは、2つのチェッカーボードした2Kのものから4K画像を再構築する。

# Dynamic Antialiasing

- [@Jimenez2017b]Call of Duty: Infinite Warfareにおける動的アンチエイリアシング
    - 動的解像度とテンポラルアップサンプリングを組み合わせる
    - 負荷に依存してAAの量を変化させ、常に1080pフレームを出力する
- Advances in Real-Time Rendering in Games: Part I
    - 月曜日 午前11:40

次週、我々はInfinite Warfare用に作ったテクノロジーをプレゼンテーションしているだろう。ここれは我々が動的アンチエイリアシングと呼んだものを作るために動的解像度とテンポラルアップサンプリングを組み合わせる。ここでは負荷で変化するのが解像度ではなく、アンチエイリアシングクオリティである。

# まとめ[Summary]

- MLAAは現状[the status quo]に疑問を投げかけた
- MLAAはトレンドに逆らった
- MLAAはおそらくMSAAとハードウェアアンチエイリアシングの進歩を遅らせた
- Unreal EngineはMSAAのサポートを追加した
- ハイブリッドなソリューションで見られる興味深いトレードオフ

まとめると、

MLAAは多くの研究者やゲーム開発者の目を向けさせ、現状に疑問を投げかけた。

多くの場合、一部のテクノロジーがトレンドとなり、業界の皆が盲目的に従う。
とてもきついスケジュールでゲームを出荷する必要がある我々ゲーム開発者としては理解できることである。そして、トレンドに従うことでリスクを軽減する。

しかし、MLAAはトレンドをうまく逆らったこれらのケースのひとつである。

一方で、普及したポストプロセッシングアンチエイリアシングの採用のため、MSAAとハードウェアアンチエイリアシングは恐らく鈍化した。

Unreal EngineはテンポラルAAに加えてMSAAのサポートを最近提供した。これは多分完璧なソリューションが存在せず、時折様々なトレードオフを求めて堂々巡りしていることを示している。

そして、私の見方では、単一のシステムに頼らず、むしろ複数のアプローチの強みを活用するとしたなら、ハイブリッドなソリューションで見られる興味深いトレードオフが存在すると考えている。

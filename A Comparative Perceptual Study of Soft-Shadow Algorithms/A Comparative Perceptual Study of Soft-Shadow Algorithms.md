---
title: A Comparative Perceptual Study of Soft-Shadow Algorithms [@Hecher2013]
---
# はじめに {#sec:1}

ソフトシャドウのためのリアルタイムアルゴリズムは長年の間リアルタイムレンダリング研究の主要な部門であった。その目標は60フレーム毎秒の時間予算内で物理的なソフトシャドウの外観の*もっともらしい*近似を提供する賢い方法を見つけることである。この成熟した分野において、競合するアルゴリズムの間の差異はしばしば極めて微妙である([@fig:1])。伝統的に、シャドウアルゴリズムは2つ3つの選ばれたシーンで参考解[reference solution]とその出力を比較したり、ピクセル毎の差異を強調したりすることによって評価してきた。さらに、その根拠[authority]を判断する[judge]のは通常シャドウの専門家のグループである。しかし、これは、比較する参考解を持たず、専門家でない、典型的なユーザがシャドウを体験する方法ではない。

![4つの異なるソフトシャドウアルゴリズムでレンダリングされたシーン。その結果は非常に似ているが、そのソフトシャドウ領域において微妙な差異がある。問題は、ユーザがこれらの差異を知覚できるか否か、または、彼らがground truthな解法(GT)をBackprojection(BT)のような物理ベースのリアルタイム近似、または、Percentage-Closer Soft Shadows(PS)やPercentage-Closer Filtering(PF)のような単純な非物理的解法と区別できるかどうかである。](assets/01.png){#fig:1}

このため、与えられるシャドウアルゴリズムが経験済みのユーザ、専門家のユーザ、参考解と共に行う人と比較して*典型的な*ユーザにどれだけ*もっともらしく*見えるか、および、詳しくないユーザが2つの定性的に異なるシャドウアルゴリズムの種類の間の知覚的な差異を*おおむね[in principle]*判断できるか否かを問うことをこの研究の主な動機であった。これらの疑問は様々な関連するシャドウ特性に関して*系統的に*評価しなければならない。特に、我々は、人間の知覚が特定の環境においてソフトシャドウアルゴリズムのある特徴に対してどれだけ*敏感*であるかの疑問を調査しなければならない。

驚くべきことに、シャドウの柔らかさ[softness]を正しく推定する能力(例えば、正しい光条件を判断するために)は、我々の認識では、科学的評価の対象になってこなかった。これは、本質的な奥行きの手がかりとしてのシャドウの重要性や観測者にシーンを現実的に見せる方法が良く知られていることを考慮すれば、かなりの注目に値することである。

この論文の貢献は以下のことである。

- 様々な入念に選ばれたシーンカテゴリの中で物理的な半影のとある重要な特性を近似する能力に関してソフトシャドウアルゴリズムの種類を*体系的に*比較する初めての包括的研究。
- ゲームデザイナや研究者のためのガイドラインとして使われる可能性がある、未経験者、経験者、および、専門家のソフトシャドウの知覚に関する新しい洞察。例えば、物理ベースのモデルに対する全体の優先傾向[preference]はリアルタイムにおいてより高い正確さのために努力すること[striving]が実用的な妥当性[practical relevance]を持つかもしれないことを示す。
- 一般におけるソフトシャドウの研究デザインと見た目のソフトシャドウの実験に関する新たな事実。例えば、異なる質問がソフトシャドウのユーザの判断にどれだけ影響を与え得るか。また、どのシーンカテゴリやソフトシャドウの特徴がソフトシャドウの比較に適しているか、または、どれが適していないか(驚くことに、vegetationのシーンは適していないことが判明した)。

## 研究の範囲と制限 {#sec:1.1}

我々の主な目標は独立変数の管理可能な範囲を探り、ワーストケースのシナリオにおいて徹底的にそれらを調査することであった。特に、我々はソフトシャドウのアルゴリズムが半影の領域の物理的特性をどれだけ上手く捕らえられているかを判断し、半影の差異に可能な限り重きを置く。我々は、それらの半影の近似品質の公正な比較を提示するため、できる限り選ばれたアルゴリズムの低レベルレンダリングのアーティファクトを回避する。アニメーションの計算は、ひとつの研究の範囲内では適切に扱うことが難しいと思われた、追加の自由度を必要とするので、静的なソフトシャドウのみが調査される。我々は、誤ったソフトシャドウの潜在的マスキングを回避するためのシーンのひとつを除いて、すべてでテクスチャを使用しない[@Ferwerda1997]。しかし、我々は、関係する要因に関する展望[outlook]を得るため、我々の研究にテクスチャを伴うひとつの現実的なゲーム型のシーンを含めた。この研究のもうひとつの制限は、各シーンにおいて(そのゲーム型のシーンを除いて)レンダリングされるイメージにおいて可視であった同じ大きさの1つの光源が使われたことである。しかし、光源の異なる大きさや形状はその同じ要因によってシャドウ全体における半影の大きさを変化させ、現在の結果はユーザがシャドウにおける相対的な差異、すなわち、半影の変化の仕方をより良く理解することを示している。

# 研究の概要 {#sec:2}

我々は、ユーザが様々な品質の近似の間の差異を知覚できるか否か、そして、どの程度知覚できるかを明らかにするため、*一対比較[pairwise comparison]の手法*を用いた知覚研究を行った。その実験のもうひとつの目的はソフトシャドウにおけるどの特徴が知覚される品質を大幅に改善するかを解明することである。ソフトシャドウは複合的なライティング現象であるので、比較作業は挑戦的であり、ground truthのリファレンスを示すことによって容易にさせることができる。しかし、ground truthのリファレンスとの比較は人工的な環境[setting]であり、その結果は典型的なユーザのソフトシャドウを判断する能力を恐らく過剰に推定する。一方で、我々はこの作業におけるパフォーマンスがユーザ体験に関する問題ではないかと疑っている。未経験のユーザはソフトシャドウに関する知識を持つ経験者と比べてもっと低い感受性を持っているかもしれない。故に、我々は、*未経験者*、*経験者*、*熟達者[cognizant user]*、と定義した3つのユーザ体験レベルを調査した。これら3つのレベルは各ユーザタイプの振る舞いが3つの連続したフェーズの1つにおいてシミュレートされた所の研究パラダイムによって調査された。初期未経験ユーザ[initially inexperienced user]は学習フェーズを通して経験者になってもらった。そこでは、ground truthのリファレンスが提供された。これらの結果がソフトシャドウレンダリングの本物の専門家とどのように比較されるかを見つけるため、我々はソフトシャドウや大域照明の分野での科学的文献の発表経験を持つ人々を含めて、彼らの結果を非専門的なユーザと比較する。

個々のソフトシャドウ近似の間の差異はかなり微妙である可能性があるので、特に未経験者の知覚では、我々はtwo-option forced-choice comparisonの一般的に使われる概念が*ユーザの整合性[user consistency]*を減少させることによってその研究の情報価値[informative value]を制限し得るという不利益[disadvantage]を持つ可能性があることを発見した。故に、我々は中立的な選択を捨てる[leave]代替の概念を用いる。

# 関連研究 {#sec:3}

## シャドウと照明の知覚 {#sec:3.1}

シャドウの知覚はいくつかの心理学的研究のトピックであった。Wanger et al.はシャドウがオブジェクトの空間的関係性に対する重要な見た目の手がかりであることを示した[@Wanger1992; @Wanger_et_al1992]。 @Knill1997 はシャドウが光源の方向とその下地となる表面の形状に関する情報を提供できることを示すことができた。他の研究ではオブジェクトの接触を知覚するためにシャドウの役割[@Huet2000]や相互反射[@Madison2001]に焦点を当てた。 @Jarabo2012 はジオメトリの複雑さや色のような要因が動的な群衆を伴う仮想シーンにおいて照明の知覚的忠実性にどれだけ影響を与えるかを評価した。

人間の感受性が低い、それ故に、より低品質のシャドウで十分である所の領域におけるソフトシャドウレンダリングを高速化する方法についての以前の研究があった[@Sattle2005; @Vangorp2006; @SchwarzStamminger2008b]。しかし、これらの研究は、特定の種類のアルゴリズムのスケーリングの問題を対処するので、補足的であるのに対して、我々は別個の種類のソフトシャドウアルゴリズムの知覚を比較すること、および、様々なソフトシャドウの特徴を扱うことが知覚的品質を向上させるかどうかに関する研究を提供する。

## 研究デザイン {#sec:3.2}

コンピュータグラフィックスは科学として成熟してきているので、コースティクス[@Gutierrez2008]、トーンマッピング[@Ledda2005]、幾何的な歪み[@SetyawanLagendijk2004]、image-retargetingアルゴリズム[@Rubinstein2010]、大域照明[@Cadik2012]のような包括的な知覚的研究における様々なグラフィクス的効果の利点を評価することの興味はますます高まっている。我々の研究の構造はこれらの研究に本質的に関連し、我々は以下に関する差異、および、類似性を議論する。

@Ledda2005 の実験では、被験者[participant]に対して2つのLCDモニタ上で異なるトーンマッピング操作によって生成されるLDR画像を示し、一方で、参考解としてHDRモニタ上でオリジナルの画像を示した。このアプローチはアルゴリズム処理のパフォーマンスが最適解[optimal solution]に対してテストされなければならず、刺激が[stimulus]どのように見えるべきかを被験者が厳密に知っている所のワーストケースのシナリオをもたらすときに有用である。Ledda et al.とは対照的に、 @Rubinstein2010 の大規模なユーザスタディは参考解を提供*しない*一対比較を用いる。我々の研究において、我々は、まず参考解ありで行い、その後、参考解なしで行うという*両方*のシナリオを含める。そして、これらを用いてソフトシャドウアルゴリズムを評価するためのユーザの専門知識の異なる度合いを模倣する。これは、大域照明とレンダリングのアーティファクトの検出のために画像品質メトリクスを計算する、 @Catik2012 と同種のものである。これらの2つのフェーズに加えて、我々はもうひとつの研究フェーズにおいて参考解を示してから達成される学習効果を研究する。また、参考解なしでも行う。

レンダリング手法の知覚を研究するための興味深い代替手法は、もっともらしい大域照明を生成するために可視性の計算において必要となる正確性を調査した @Yu2009 によって用いられた。彼らはいわゆる*paired comparison plus category* [@Scheffe1952]のパラダイムを用いた。好み[preference]を答えるのではなく、参加者は類似性の高低を範囲とする事前に定義されたカテゴリの尺度で2つの画像の*類似性*を採点した。我々の研究でも同様に類似性の推定を得るため、我々は評価に中立的な回答の数を組み込む。

@SetyawanLagendijk2004 は一人の被験者の回答の質とすべての被験者の間の合意を解析する。我々は被験者のパフォーマンスや学習フェーズが効果的だったかどうかを評価するために我々の研究にこの概念を採用した。 @Akyuz2007 に従って、我々は、有意差を計測できず、それ故に、匹敵する品質であると判断したアルゴリズムのグループを見つけるためにTukeyのHSD法[@Steel1997]を用いる。その成果[outcome]に関して実験の効果をより良く評価および理解するため、我々は*degree of indifference*と表記する新しい量を導入し(詳細は[@sec:7]で説明される)、一対比較の結果から*worth parameters*[@HantzingerDittrich2012]を計算する。

# 選ばれるソフトシャドウアルゴリズム {#sec:4}

リアルタイムにおいてソフトシャドウを近似する多種多様なアルゴリズム[@Eisemann2011]のため、適切なサブセットの選択はこの研究の準備において重要なプロセスである。一方で、我々の目的は単純な経験則的手法から高コストだが完全に物理的な手法までの範囲全体を取り扱う[cover]ことであった。他方で、我々はひとつの研究で調査するのに適したアルゴリズム数に制限しなければならない。我々は、利用可能な可視性情報を用いて物理的シャドウの現実的な半影を近似する能力に関する、リアルタイムソフトシャドウアプローチの*代表的な種類*を形成する3つのアルゴリズムを選択し、そして、比較のためにブルートフォースのground truthの解を追加する。我々はリアルタイムソフトシャドウレンダリングに対して実践で使われるほとんどの手法がこれらの基本形式のバリエーションかある種の*アーティファクト*を隠すことを目的とする調整版であると主張する。また、すべての主要なリアルタイムアプリケーションにおけるこれらの優位性[predominance]のため、シャドウマッピングに基づくアルゴリズムのみが考慮された。すべての我々のアルゴリズムの見た目の比較は[@fig:2]で確認できる。

![ソフトシャドウアルゴリズムの見た目の比較。クローズアップは、ヒューリスティクスによって誤魔化す[fake]のが最も難しく、それ故に、シャドウアルゴリズム間の見た目の差異のほとんどを占める、*penumbra softening*と*penumbra overlap*の2つの特性を示している。拡大された画像のコントラストは差異をより良く可視化するために調整されたことに注意する。](assets/02.png){#fig:2}

我々は*overshadowing*や*staircase artifacts*のようなアーティファクトを回避することを決めた。これは、それらの存在が結果として前述のテストにおいてアーティファクトフリーな画像に対する明らかな優先傾向となるためである([@fig:3]を参照)。用いられるアルゴリズムは以下である。

![アーティファクトのあり(a)となし(b)のシーンにおいてアルゴリズムを選択する確率。アーティファクトがない場合には著しく異なる結果を引き起した。拡大された画像のコントラストは差異をより良く可視化するために調整されたことに注意する。](assets/03.png){#fig:3}

Percentage-Closer Filtering (PF)
: PFは二値のシャドウマップテストの結果をフィルタリングすることによるハードシャドウの境界に対するアンチエイリアシング手法として導入された[@Reeves1987]。しかし、これは適切なフィルタカーネルの大きさを設定することによってソフトシャドウの半影領域をシミュレートするためにも用いることができる。しかし、カーネルの大きさは大局的なパラメータであり、局所的な半影の大きさを変化させられないので、その手法は[@fig:2]aに示されるように*penumbra softening*を再現[reproduce]できない。これは安価な非物理的アルゴリズムであり、我々が期待するのは、それが研究において最も物理的にもっともらしくないものとして現れるであろう、ということである。

Percentage-Closer Soft Shadows (PS)
: PS[@Fernando2005]は、半影の大きさが光源からレシーバーおよびブロッカージオメトリまでの相対距離に基づいてフラグメントごとに動的に計算される、というPFの拡張である。これは光源からのブロッカージオメトリまでの距離を近似するために単一のシャドウマップを用い、それ故に、単サンプルのソフトシャドウアルゴリズムとして知られている。この単純な経験則的モデルは半影の大きさの変化を計算に入れるが、そのアルゴリズムの非物理的性質はsoftness overlapの異なる度合いを持つ半影の領域において問題を引き起こす([@fig:2]b)。
  最近の手法はtemporal coherenceを伴うPSを組み合わせることによってより高品質を達成する[@Schwarzler2013]。ただし、これはcoherenceが破綻しない場合に限ってのみ完璧に機能する。

Backprojection (BP)
: Backprojection[@Atty2006]はシャドウマップから小さなblocker patchesを識別し、それらを光源にbackprojectingすることによってそのシーンにおけるある点に届く光の量を推定する。この手法は可視性が単一のサンプルを用いてのみ推定されるという事を除いて物理ベースである。そのアルゴリズムはより単純なPS手法よりも正確に複合的なpenumbra overlapと半影の大きさの変化の両方を扱うことができる。残念ながら、BPはライトリークとovershadowingアーティファクト(すなわち、半影が若干暗くなりすぎる可能性がある)を起こす傾向がある。我々は、overshadowingアーティファクトを引き起こさないためでもある、慎重に選択されたパラメータでライトリークを減らすために、gap-fillingアプローチ[@Guennebaud2006]を用いることを選んだ。
  BPをより堅牢にすることを目標に持ついくつかの手法がそれ以来発表されてきたが、通常は単サンプルのアーティファクトを緩和していることに注意する。しかし、これらすべては複数のシャドウマップレイヤ[@SchwarzStamminger2008a; @Bavoil2008]、または、複数視点からのシャドウマップサンプル[@Yang2009]における複合的な可視性計算のコストを伴い、改善された正確性に対するリアルタイム要件を本質的に緩和させる。

  Ground Truth (GT)
  : 我々は参考解として、範囲光源を複数回サンプルし、その後、結果のシャドウマップと一緒にブレンドする、ブルートフォース手法を用いる。この手法は十分な数のポイントライトに対して物理的なground truthに収束するので(大域照明効果を無視して)、我々はこれをこの研究の範囲内でground-truth解と呼ぶ。我々の実験において、その解は1024サンプル以降に収束した(すなわち、それ以上のピクセル強度の変化がなかった)。このアプローチは低速であるが、overlappingアーティファクトなしに正しいpenumbra softeningを生成する。

これらの手法のそれぞれが達成できる近似品質は根本的に異なり、PFからGTの順に増加する。PFは均一な半影をモデル化することだけが可能であるが、PSは局所的な*半影の大きさの変化*に対する能力を持つ。BPは、光源の遮蔽率[coverage]の積分の正確な物理モデルを用いるので、*物理ベース*の半影を計算することによってさらに一歩先を行く。GTは1024サンプルが用いられるときに現実解[real solution]に収束するという意味において*物理的に正確[physically correct]*な半影を計算する。アルゴリズムの能力のまとめに関しては[@tbl:1]を参照のこと。

||半影の大きさの変化|物理ベースの半影|物理的に正確な半影|
|:-:|:-:|:-:|:-:|
|PF|--|--|--|
|PS|$\checkmark$|--|--|
|BP|$\checkmark$|$\checkmark$|--|
|GT|$\checkmark$|$\checkmark$|$\checkmark$|
: この研究において調査されるアルゴリズムによってサポートされるソフトシャドウ近似に対する能力。 {#tbl:1}

# シャドウ知覚の独立変数 {#sec:5}

ソフトシャドウの知覚は、観測者およびオブジェクトの移動、テクスチャの色、ライトの角度、ライトの数、シーンの複雑さのような多くの要因の影響を受ける可能性がある。この研究において、我々は、ライトとオブジェクトの空間的関係と結果の半影のカテゴリ、および、ユーザ体験の度合い、の2つの要因に焦点を当てる。我々はテストシーンの意味のあるセットでこれらの要因を評価する。

## 半影のカテゴリ {#sec:5.1}

我々はソフトシャドウアルゴリズム間の品質差を引き起こすソフトシャドウの2つの特性を識別した。1つ目は複数のシャドウキャスタの場合での*penumbra overlaps*であり、これは経験的モデルを用いて誤魔化すのが難しい複合的なシャドウイング効果を引き起こし得る(例えば、正しいオクルーダの融合)。2つ目は*penumbra softening*であり、シャドウキャスタの点とシャドウレシーバにある対応する点との間の距離がシャドウをキャストしている表面に沿った十分な変化を持つときに発生する(例えば、[@fig:2]における薄いオクルーダの上と下の点を考慮する)。[@fig:2]はこれら2つの特性に関してすべての用いられるシャドウアルゴリズムの間の見た目の差異がある状況を示している。両方の現象はシーン中にあったりなかったりするので、結果として*半影カテゴリ*として示される4つの取り得る組み合わせとなる。これらの効果がいずれもない場合、ソフトシャドウアルゴリズムは基本的に区別できない。

## ユーザ体験 {#sec:5.2}

この研究のもうひとつの目標は異なるユーザ体験レベルでのソフトシャドウ近似の知覚を評価することである。我々は3つの経験レベルを評価する複数のフェーズを設計することによって被験者が研究中に得る知識を使うことを選択した。この設計は典型的なユーザの学習の振る舞いを研究することができるという追加の利点を持つ。具体的には、各ユーザは3つの連続するフェーズに参加する。第1フェーズでは、我々は*未経験者*から期待されるソフトシャドウ近似を区別する能力を、第2フェーズでは、*熟達者*から期待される最大限の能力を、第3フェーズでは、*経験者*のパフォーマンスを計測する。これらのフェーズは[@sec:6]においてその詳細が説明される。加えて、我々は同一条件下で同じ実験を行ったソフトシャドウの*専門家*のグループを含めた。

## シーンカテゴリ {#sec:5.3}

有意義な結果を生み出すため、我々は選ばれたシーンのセットにおいて様々なオブジェクトおよびシャドウの複雑さを含める必要がある。具体的に、我々は多種多様な取り得るシーン構成を含めるために*系統的[systematic]*であることを我々の研究に欲している。しかし、シーン中のオブジェクト数、それら個々の複雑さ、それらの配置のようなシャドウ知覚に影響を与え得る多くの要因がある。その課題[challenge]は、すべての要因の組み合わせを調査するときの次元の呪い[curse of dimensionality]を回避しつつ、実践で遭遇する最も可能性のあるシーン構成を系統的に含める小さなカテゴリのセットを見つけることであった。選択される*シーンカテゴリ*は以下である。

Simple Objects
: シーンは箱や円柱のような単純な普通[regular]のオブジェクトで構成される。これは、ユーザが最終的なシャドウ形状についての最も強い理解[conception]を持つはずであるので、重要な極限のケースである。ほとんどの複合的なオブジェクトはこれらの基本的な構成要素から構築できる。アプリケーションでは、そのようなオブジェクトは、例えば、屋根のない家や都市環境における柱を表現するのに使われる。

Complex Objects
: 複合的オブジェクトはより複合的な配置を形成する最初のカテゴリからのオブジェクトの集まりであり、あまり多くの規則性を示さない。

Structured Objects
: 構造的オブジェクトは、1または2次元における並進対称性[translational symmetry]のような[@Pauly2008]、高い値の規則性と対称性を示す。例えば、フェンスは1次元において箱が規則的に配置されたものとして、フェンスの横木[crossbar]はその垂直な次元において箱が規則的に整列したものとして示すことができる。これを別のカテゴリとして持つことは、人間がシャドウにおいても構造を識別するであろうことから、必要不可欠である。加えて、規則的な部分はそれらのシャドウが別の存在[entity]に属するものとして知覚されないようにつながれなければならない。

Vegetation
: 草木は葉っぱのようなより小さなオブジェクトの不規則で一見すると無作為な配置を示す。ここでは、葉っぱの密度のような統計的な特性は個々のプリミティブより重要となる。我々は、シャドウをシャドウキャスタと比較するために観測者によって使われる可能性がある規則性の最小量のためにもうひとつの極限のケースを構成するので、別のカテゴリとしてこれを選んだ。また、それは、高度に複合的な輪郭により、ソフトシャドウ近似に対する困難なケースを構成する。

被験者に実際に提示する構成に達するため、我々は単純に組み合わせるシーンと半影カテゴリが16つの異なる組み合わせをもたらすであろうことに言及する[observe]。しかし、いくつかの特例がある。フェンス、格子、植木[plant]では、penumbra overlapは、そのようなオブジェクトの個々の部分が接続されなければならないので、常に発生するだろう。一般的に、これは木々のような無作為なオブジェクトに対しても真であり、取り得る組み合わせを12に減らす。最終的に、より少ない人工的な設定を調査もするため、我々は、平らでない表面に部分的にキャストされるsofteningおよびoverlappingする半影を伴う、もうひとつのカテゴリ(ゲームシーン)を追加し、結果として合計13つの組み合わせとした。我々は2つの異なるシーンによってこれらの組み合わせのそれぞれを表現し、全体で26つのテストシーンに至る。[@fig:4]はこれらのシーンの選択を示し、半影(行)とシーンカテゴリ(列)によってそれらを分類する。

![この表は調査される*半影*と*シーンカテゴリ*の組み合わせを示す。行は*半影カテゴリ*を示し、色は*シーンカテゴリ*を示す。空欄はもうひとつの方によって説明されるカテゴリを示す(詳細は[@sec::5.3]を参照)。](assets/04.png){#fig:4}

その他のシーン特徴
: サンプルにもうひとつの次元を導入できなかった変数ごとに、我々はほとんどの場合で"ワーストケース"の条件、すなわち、ユーザがソフトシャドウの不正確さに最も敏感となる所の条件に対応する構成を用いることを決定した。静的なビュー条件を用いることは徹底的にシャドウを調査する能力を最大化する。シャドウを受けるジオメトリとしての平坦な白い表面はマスキング効果なしにシャドウ特性の最適な知覚を可能にする。シャドウをキャストするライトに対して白色を用いることはシャドウのコントラストを最大化する。さらに、我々はユーザのこれらのジオメトリの認識を促進するためにシャドウをキャストするオブジェクトの柔軟性[plasticity]を増加させた。これは所要商用のオフラインレンダラによるアンビエントオクルージョン、および、ピクセル毎に基づくディフューズシェーディングを計算することによって達成された。異なるオブジェクトの区別を強調するため、シャドウをキャストするオブジェクトは原色および二次色[primary and secondary colors] (赤、黄、など)で質感を持たせた。距離の知覚は白色のシャドウを受ける範囲を囲む領域に対してチェッカーボードテクスチャを用いることによって促進させた。心地良いが真面目な空気[atmosphere]を生成するため、アンビエント光が有効化され、背景はライトブルーで色付けされた。

# 実験の手続き {#sec:6}

我々は大学関連のオンラインフォーラムで公募することによって採用された48人の被験者で実験を行った(平均年齢26.27、標準偏差7.57、女性25人、男性23人)。アーティスト、重度のゲーマー、コンピュータグラフィックスの経歴を持つ人は未経験の被験者を保証するためにこの研究において参加することを一切許可されなかった。加えて、我々はシャドウや大域照明を扱う科学的文献の発表経験を1本以上持つ8人の専門家を採用した(平均年齢33.75、標準偏差7.76、全員男性)。人々は2つのグループの内の1つに無作為に割り当てられた(グループA:男性12人、女性13人、専門家4人。グループB:男性12人、女性12人、専門家4人)。合計で、14,976票が投じられた。

その実験は同じ純粋に人工的な光条件を保証するために窓を閉め切った部屋で行われた。平均で、その実験は非専門家に対して46分、専門家に対して62分かかった(regeneration breaksを含めず)。十分なレベルの意欲を保証するため、各被験者には報酬[reimbursement]が支払われた。その実験は(短い休憩[recreational breaks]を挟まれた)3つのフェーズに分けられ、それぞれは合計で91回の試験[trial]から成る([@fig:5]を参照)。

![我々の実験の3フェーズ設計。第1フェーズでは、ユーザは未経験であり、一対比較の作業を行った。第2フェーズでは、比較用の参考解付きで行い、最後のフェーズでは、再び一対比較を行ったが、2つのグループの内の1つには若干異なる作業が無作為に割り当てられた。](assets/05.png){#fig:5}

## 比較作業 {#sec:6.1}

被験者は各試験で2つの画像を確認し、シーンの床にキャストされるソフトシャドウを判断することによって比較しなければならないであろうことを知らされた[were instructed]。彼らは画像が同一である可能性があること知らされた。彼らはシャドウを生成する光源がその個々の位置で黄色の四角として可視化される範囲光源であることを告げられた。各被験者[test subject]は明示された順序で3つすべてのフェーズに参加しなければならなかった([@fig:5])。

フェーズ1
: このフェーズでは、初期未経験者[initially inexperienced user]は参考を含まずに異なるシャドウアルゴリズムでレンダリングされた2つの画像を比較しなければならなかった。被験者はソフトシャドウが*より良く見える*と考える方の画像を選択するよう頼まれた。我々は、この方が未経験者にとって"物理的によりもっともらしい"ソフトシャドウを選択するよう頼むより直観的であると事前調査[pilot testing]で気づいたので、この質問を選択した。

フェーズ2
: 第2フェーズでは、比較される画像のペアの上部に参考画像が示された。被験者はこれが物理的に正しいシミュレーションであることを告げられた。そして、彼らはその参考の下にある2つの画像のどちらが物理的によりもっともらしいソフトシャドウを持つかを判断するよう頼まれた。

フェーズ3
: 最終フェーズでは、比較作業が参考なしで再び行われた。被験者は、両群全体で均等に分けられた男女を持つ、2つのグループに分けられた。*グループA*はフェーズ1におけるものと同じ質問を受け(どちらのシャドウがよく見えるか)、*グループB*はフェーズ2におけるものと同じ質問を受けた(どちらのシャドウが物理的によりもっともらしいか)。

回答はスライダーで与えられた。ここでは、被験者らはペアの左または右の画像に対する優先傾向の度合いを点数化できた。スライダーは連続的な尺度を持った。左および右の端には、対応する画像に対する明らかな優先傾向を定義するようにラベルが置かれた。両画像の間に位置するスライダーの中心には、優先傾向なしのマークがあった。

2AFC設計に対する決定は2つのアルゴリズムの結果の間の実際の知覚可能な差異が小さかった場合に対する我々の懸念によって動機付けされた。これらの場合、中立的な選択肢は、結果の一貫性を低下させる矛盾する回答を引き起こすと研究されたもの(例えば、鋭いエッジに対する一般的な優先傾向)よりほかの要因に基づく強制される決定を回避する。さらに、中立的な回答を数えることは特定のシーンカテゴリおいて比較されるアルゴリズムの品質での知覚される類似性に対する基準[measure]をもたらす([@sec:7]を参照)。

連続的な回答の尺度は中立的またはほぼ中立的な回答が支配的になる問題を減らすために順序的なものの代わりに選ばれたことに注意する。その連続的尺度は被験者に優先傾向の大きさを指定することと錯覚させるはずであるのに対して、そのデータは最終的に順序尺度で解析された("left preferred"、"no preference"、"right preferred")。

比較には時間制限はなかった。次の試験は前のものの回答の後に開始され、2秒間白い背景に黒いfixation crossを先行して表示させた。

## 画像ペア {#sec:6.2}

半影とシーンのカテゴリの組み合わせ13つと、4つのソフトシャドウアルゴリズムの取り得るペアリングの組み合わせ$\left( \begin{array}{c} 4 \\ 2 \end{array} \right) = 6$つは被験者あたり78つの一対比較をもたらす。これに対して、我々は半影とシーンの組み合わせごとに無作為に選ばれたアルゴリズムでレンダリングされた同一の画像のペアを1つ追加し、合計91つの画像ペアをもたらす。同一の画像ペアは被験者の回答の基準値[baseline]と同一画像ペア条件に対する一致性[agreement]を得るために使われた。

それぞれの半影とシーンの組み合わせにおける最小の種類を得るため、我々は13つの組み合わせのそれぞれにたいして2つのシーンを生成した。これは、異なる配置または異なるモデルによって得られた。実験で使われるすべての画像は4つのソフトシャドウアルゴリズムを伴う各シーンをレンダリングすることによってオフラインで生成された。4つすべての手法は32ビットの浮動小数点精度を持つ$1024^2$ピクセルのシャドウマップを活用した。光源の色および強度やアンビエント項のようないくつかの構成はすべてのレンダリング手法で等しいままであった。ほかのレンダリングパラメータはレンダリング画像ができる限りground truthに似るように調整された。

時間関連の効果を相殺するため、すべての被験者はすべてのフェーズを通して個別の無作為化された画像ペアの順序を見た。比較の各ペアの画像は左か右の位置に無作為に割り当てられた。フェーズ1では、被験者はカテゴリごとに我々が作成した2つのシーンの内の1つを見、フェーズ2では、残り一方を見た。どのフェーズでシーンのどちらが選択されたかもまたカテゴリや被験者ごとに無作為に決定された。フェーズ3では、画像ペアはカテゴリの両方のシーンに対して、被験者が第1フェーズでのシーンの50%と第2フェーズでのシーンの50%をそれぞれ見るように、無作為に選び取られた。

# 解析の方法論 {#sec:7}

(略)

# 結果 {#sec:8}

(略)

# まとめとおわりに {#sec:9}

TODO

# 今後の課題 {#sec:10}

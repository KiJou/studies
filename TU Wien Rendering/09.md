# #09 --- Hard and Soft Shadows

## 影(shadow)の計算

影とは、レイトレーシングにおいては、光源から見えない領域のことである。
光源から放たれた光線が物体に当たれば、その接点以降は光の届かない影の領域となる。逆にある地点から考えれば、そこから見た光源が一部でも遮られているなら、そこは少なからず影の領域である。

大きさを持たない点光源では、光源の一部を遮るということはできないため、光は完全に遮られるか否かの2通りしかない。すなわち、点光源が作る影はすべて、光が完全に遮られてできる本影(umbra)である。

現実世界では光源は大きさを持つため、ある地点において、物体が光源の一部を遮ることがある。そこでは届く光量が低下することになるため、光の一部が遮られてできる半影(penumbra)を作る。

コンピュータグラフィックスでは、本影のみのくっきりした影をハードシャドウ(hard shadow)、半影を含む柔らかい影をソフトシャドウ(soft shadow)と呼ぶ。[^hard_shadow]

では、この半影下での輝度(brightness)を決定するにはどうすれば良いだろうか。
これは、ある地点において、元々の光源の輝度に、見えている光源の面積の割合をかけることで求められる。
レイトレーシングでは、ある地点から光源に向けて放たれる光線が物体に遮られなかった割合をもとに推定する。この光線はshadow rayと呼ぶ。この方法はいわゆるモンテカルロ積分(Monte Carlo integration)である。

現実の影は単なる黒色でないことがほとんどだが、これは間接照明(indirect illumination)により周りから反射した光が入り込んで色をつけるためである。

## 用語

影(shadow)
: 光が当たる物体が投影されてできる、(別の物体における)光の当たらない表面。

陰(shade)
: 光が当たる物体にできる、光の当たらない表面。

本影(umbra)
: 光源が完全に遮られてできる、光の当たらない領域。

半影(penumbra)
: 光源の一部が遮られてできる、光の一部が当たらない領域。

モンテカルロ積分(Monte Carlo integration)
: モンテカルロ法(- method)を用いて積分(面積)の近似解を求める手法。
  全体の面積と乱数で打った点が対象の領域内に存在する割合から対象の面積を近似できる。試行回数が多ければより良い近似になる。

## 英語表現  

- obstruct /əbstrˈʌkt(米国英語)/
  - [動] ふさぐ、さえぎる、妨害する

- determine /dɪtˈɚːmɪn(米国英語), dɪˈtɜːmɪn(英国英語)/
  - [動] 決心する、決定する、測定する

## 参考文献

http://www.astronomy.ohio-state.edu/~pogge/Ast161/Unit2/eclipses.html

[^hard_shadow]: ハードシャドウはソフトシャドウに比べてリアリティでは劣るものの、リアルタイムCGにおいては計算量が少ないという利点がある。

---
title: Advanced Lighting R&D at Ready At Dawn Studios [@Neubelt2015]
numberSections: false
---
# 焼き込み式大域照明[Baked Global Illumination]

- 目標
    - 高品質な静的GI
    - 焼き込まれた環境
    - 焼き込まれたキャラクターライティング
    - ディフューズとスペキュラ

The Order: 1886は屋内と屋外の両方の中くらいの大きさのレベルを持つリニアなゲームである。このゲームはそのライティング的にかなり静的であり、我々のプロジェクトに対して静的に焼き込まれたGIソリューションを使うのに最も理に適っている。

ディフューズライティングだけでなくスペキュラGIも同様にキャプチャするのが重要である。焼き込まれたスペキュラを強く推し進める多くの理由のひとつはキューブマップを用いることで発生する制限である(間違った場所と角度の品質で間違った反射を空間的に取得する)。

# 沢山の解決法を試した[Tried Many Solutions]

- 焼き込まれたAO
- SG(5, 6, 9, 12)
- SH(4, 9)
- 方向性ディフューズ
- PRT
- 方向性AO
- RGBディフューズ
- 透視投影補正キューブマップ
- H-Basis4/6
- H-Basis AO

我々は開発中に多くのテクニックを試したが、これらの中に我々のニーズにピタリと一致するものはなかった。いくつかのテクニックは小道具用のスペキュラおよびディフューズオクルージョンのためのH-Basis AOのような出荷する製品に残ったままになっている。

しかしながら、最終的には球面ガウス[Spherical Gaussians]を用いることになり、これに決定した理由を手短に見ていこうと思う。

# 球面調和ディフューズ[Spherical Harmonics Diffuse]

- 良い場合: 低い周波数の信号
- 悪い場合: 高い強度、方向性のライティング

注意: 信号をブラーするコストでリンギング[ringing]を減らすために窓関数を適用できる。

HDRライティングは、高い正の係数を打ち消すような非常に大きな負数になる、とあるローブを引き起こす可能性がある。これは品質や圧縮に悪影響である。

# 球面調和リンギング[Spherical Harmonics Ringing]

リンギングは我々のゲーム中には、ライティングコストを抑えるために直接光を焼き込むときに現れる。これはキャラクターを死んだ/ゾンビのような見た目にしてしまう。リンギングはライティングを、例えば前頭部では行き過ぎに、光の当たらない側では暗すぎにしてしまう。

# 球面調和スペキュラ[Spherical Harmonics Specular]

- 高周波データには大量の係数が必要
- 評価が高価
    - テクスチャルックアップ
    - SHの回転
    - 評価

我々はBungieが実装した球面調和スペキュラを試した。ルックアップ、SH回転、BRDF評価の組み合わせにより少々高価すぎた。

<!-- p.8 -->

- SH9は艶消し[matte]のように見える。

9つの係数のみではマットなルックになる。係数が16つあれば十分良好だが、そのコストは間違いなく当時では高価すぎていた。

# キューブマップスペキュラ[Cubemap Specular]

- 非局所的なサンプリングアーティファクト
<!--  -->
- ライティング信号とBRDFにより近く合致する。
- 非局所的
    - AABBの透視投影の歪み[perspective warping]を実装した。
    - 未だ完璧ではなく、正方形でない部屋を作る[author]のが難しい。
- 輝く[glowing]エッジを引き起こす。
    - オクルージョンの欠落

<!-- p.10 -->

TODO
